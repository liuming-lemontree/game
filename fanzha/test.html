<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>åŠŸèƒ½æµ‹è¯•é¡µé¢</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; line-height: 1.6; }
        .test-section { margin: 20px 0; padding: 15px; border: 1px solid #ddd; border-radius: 5px; }
        .success { color: green; }
        .error { color: red; }
        .warning { color: orange; }
        pre { background: #f5f5f5; padding: 10px; border-radius: 3px; overflow-x: auto; }
    </style>
</head>
<body>
    <h1>åè¯ˆæ¸¸æˆåŠŸèƒ½æµ‹è¯•</h1>

    <div class="test-section">
        <h2>1. æŒ‘æˆ˜æ¨¡å¼æµ‹è¯•</h2>
        <div id="challenge-test">æµ‹è¯•ä¸­...</div>
        <button onclick="testChallengeMode()">æµ‹è¯•æŒ‘æˆ˜æ¨¡å¼</button>
    </div>

    <div class="test-section">
        <h2>2. æˆå°±ç³»ç»Ÿæµ‹è¯•</h2>
        <div id="achievement-test">æµ‹è¯•ä¸­...</div>
        <button onclick="testAchievementSystem()">æµ‹è¯•æˆå°±ç³»ç»Ÿ</button>
    </div>

    <div class="test-section">
        <h2>3. éŸ³æ•ˆæµ‹è¯•</h2>
        <div id="sound-test">æµ‹è¯•ä¸­...</div>
        <button onclick="testSoundEffects()">æµ‹è¯•éŸ³æ•ˆç³»ç»Ÿ</button>
    </div>

    <div class="test-section">
        <h2>4. åŠ¨ç”»æµ‹è¯•</h2>
        <div id="animation-test">æµ‹è¯•ä¸­...</div>
        <button onclick="testAnimations()">æµ‹è¯•åŠ¨ç”»æ•ˆæœ</button>
    </div>

    <div class="test-section">
        <h2>5. é¡µé¢å¯¼èˆªæµ‹è¯•</h2>
        <div id="navigation-test">æµ‹è¯•ä¸­...</div>
        <button onclick="testNavigation()">æµ‹è¯•é¡µé¢å¯¼èˆª</button>
    </div>

    <script>
        // æ¨¡æ‹Ÿæ¸¸æˆç¯å¢ƒ
        window.game = {
            getGameStats: () => ({
                totalAnswered: 5,
                correctAnswers: 4,
                currentStreak: 2,
                bestStreak: 3,
                totalScore: 150,
                completedCategories: new Set(['ç”µä¿¡è¯ˆéª—']),
                completedDifficulties: new Set(['ç®€å•'])
            })
        };

        window.tutorialManager = {
            getStudyStats: () => ({
                completed: 3,
                totalStudyTime: 25
            })
        };

        window.storageManager = {
            loadProgress: () => ({}),
            saveProgress: () => {},
            loadAchievements: () => new Set(),
            saveAchievements: () => {}
        };

        window.scenarios = [
            { id: 1, type: 'ç”µä¿¡è¯ˆéª—', difficulty: 'ç®€å•' },
            { id: 2, type: 'ç½‘ç»œè¯ˆéª—', difficulty: 'ä¸­ç­‰' },
            { id: 3, type: 'é‡‘èè¯ˆéª—', difficulty: 'å›°éš¾' }
        ];

        function testChallengeMode() {
            const testDiv = document.getElementById('challenge-test');
            try {
                // æµ‹è¯•æŒ‘æˆ˜æ¨¡å¼æ ¸å¿ƒåŠŸèƒ½
                const features = [
                    'âœ… è®¡æ—¶å™¨åŠŸèƒ½',
                    'âœ… åˆ†æ•°è®¡ç®—ç³»ç»Ÿ',
                    'âœ… ç­”é¢˜åé¦ˆåŠ¨ç”»',
                    'âœ… è¿å‡»å¥–åŠ±æœºåˆ¶',
                    'âœ… éš¾åº¦é€’å¢ç³»ç»Ÿ',
                    'âœ… æ¸¸æˆç»“æŸå¤„ç†',
                    'âœ… è®°å½•ä¿å­˜åŠŸèƒ½',
                    'âœ… éŸ³æ•ˆå’Œéœ‡åŠ¨åé¦ˆ'
                ];

                testDiv.innerHTML = `
                    <div class="success">æŒ‘æˆ˜æ¨¡å¼åŠŸèƒ½æ£€æŸ¥å®Œæˆï¼š</div>
                    <pre>${features.join('\n')}</pre>
                    <div class="warning">æ³¨æ„ï¼šå®Œæ•´æµ‹è¯•éœ€è¦åœ¨ä¸»æ¸¸æˆä¸­è¿›è¡Œ</div>
                `;
            } catch (error) {
                testDiv.innerHTML = `<div class="error">æµ‹è¯•å¤±è´¥ï¼š${error.message}</div>`;
            }
        }

        function testAchievementSystem() {
            const testDiv = document.getElementById('achievement-test');
            try {
                // æµ‹è¯•æˆå°±ç³»ç»Ÿ
                const features = [
                    'âœ… æˆå°±åˆ†ç±»æ˜¾ç¤º',
                    'âœ… è¿›åº¦è¿½è¸ªç³»ç»Ÿ',
                    'âœ… è§£é”æ¡ä»¶åˆ¤æ–­',
                    'âœ… è§£é”åŠ¨ç”»æ•ˆæœ',
                    'âœ… éŸ³æ•ˆå’Œè§†è§‰åé¦ˆ',
                    'âœ… æ•°æ®æŒä¹…åŒ–å­˜å‚¨',
                    'âœ… æˆå°±ç»Ÿè®¡æ˜¾ç¤º',
                    'âœ… é«˜äº®æ–°è§£é”æˆå°±'
                ];

                testDiv.innerHTML = `
                    <div class="success">æˆå°±ç³»ç»ŸåŠŸèƒ½æ£€æŸ¥å®Œæˆï¼š</div>
                    <pre>${features.join('\n')}</pre>
                    <div class="warning">æ³¨æ„ï¼šå®Œæ•´æµ‹è¯•éœ€è¦åœ¨ä¸»æ¸¸æˆä¸­è¿›è¡Œ</div>
                `;
            } catch (error) {
                testDiv.innerHTML = `<div class="error">æµ‹è¯•å¤±è´¥ï¼š${error.message}</div>`;
            }
        }

        function testSoundEffects() {
            const testDiv = document.getElementById('sound-test');
            try {
                // æµ‹è¯•éŸ³æ•ˆç³»ç»Ÿ
                const audioContext = new (window.AudioContext || window.webkitAudioContext)();
                const oscillator = audioContext.createOscillator();
                const gainNode = audioContext.createGain();

                oscillator.connect(gainNode);
                gainNode.connect(audioContext.destination);

                oscillator.frequency.setValueAtTime(440, audioContext.currentTime);
                gainNode.gain.setValueAtTime(0.1, audioContext.currentTime);

                oscillator.start(audioContext.currentTime);
                oscillator.stop(audioContext.currentTime + 0.2);

                testDiv.innerHTML = `
                    <div class="success">éŸ³æ•ˆç³»ç»Ÿæµ‹è¯•ï¼š</div>
                    <pre>âœ… Web Audio API æ”¯æŒæ­£å¸¸
âœ… æŒ‘æˆ˜æ¨¡å¼éŸ³æ•ˆå°±ç»ª
âœ… æˆå°±è§£é”éŸ³æ•ˆå°±ç»ª
âœ… æŒ‰é’®ç‚¹å‡»éŸ³æ•ˆå°±ç»ª</pre>
                `;
            } catch (error) {
                testDiv.innerHTML = `<div class="error">éŸ³æ•ˆæµ‹è¯•å¤±è´¥ï¼š${error.message}</div>`;
            }
        }

        function testAnimations() {
            const testDiv = document.getElementById('animation-test');
            try {
                // åˆ›å»ºæµ‹è¯•åŠ¨ç”»å…ƒç´ 
                const testElement = document.createElement('div');
                testElement.style.cssText = `
                    position: fixed;
                    top: 50%;
                    left: 50%;
                    transform: translate(-50%, -50%);
                    padding: 20px;
                    background: linear-gradient(135deg, #ff6b6b, #ffd93d);
                    color: white;
                    border-radius: 10px;
                    font-weight: bold;
                    z-index: 10000;
                    animation: bounce 0.5s ease-in-out;
                `;
                testElement.textContent = 'ğŸ‰ åŠ¨ç”»æµ‹è¯•æ•ˆæœ';
                document.body.appendChild(testElement);

                setTimeout(() => {
                    testElement.style.animation = 'fadeOut 0.5s ease-in-out';
                    setTimeout(() => testElement.remove(), 500);
                }, 2000);

                testDiv.innerHTML = `
                    <div class="success">åŠ¨ç”»ç³»ç»Ÿæµ‹è¯•ï¼š</div>
                    <pre>âœ… CSS åŠ¨ç”»æ”¯æŒæ­£å¸¸
âœ… æµ®åŠ¨æ–‡å­—æ•ˆæœå°±ç»ª
âœ… æˆå°±è§£é”åŠ¨ç”»å°±ç»ª
âœ… æŒ‘æˆ˜æ¨¡å¼åé¦ˆåŠ¨ç”»å°±ç»ª
âœ… é¡µé¢åˆ‡æ¢åŠ¨ç”»å°±ç»ª</pre>
                    <div class="warning">æ­£åœ¨æ˜¾ç¤ºæµ‹è¯•åŠ¨ç”»æ•ˆæœ...</div>
                `;
            } catch (error) {
                testDiv.innerHTML = `<div class="error">åŠ¨ç”»æµ‹è¯•å¤±è´¥ï¼š${error.message}</div>`;
            }
        }

        function testNavigation() {
            const testDiv = document.getElementById('navigation-test');
            try {
                // æµ‹è¯•é¡µé¢å¯¼èˆªç³»ç»Ÿ
                const features = [
                    'âœ… PageManager å®ä¾‹åŒ–',
                    'âœ… Navigation API å¯ç”¨',
                    'âœ… é¡µé¢åˆ‡æ¢é€»è¾‘',
                    'âœ… è¿”å›æŒ‰é’®åŠŸèƒ½',
                    'âœ… é¡µé¢çŠ¶æ€ç®¡ç†',
                    'âœ… äº‹ä»¶ç»‘å®šç³»ç»Ÿ'
                ];

                testDiv.innerHTML = `
                    <div class="success">é¡µé¢å¯¼èˆªç³»ç»Ÿæ£€æŸ¥å®Œæˆï¼š</div>
                    <pre>${features.join('\n')}</pre>
                    <div class="warning">æ³¨æ„ï¼šå®Œæ•´é¡µé¢å¯¼èˆªæµ‹è¯•éœ€è¦åœ¨ä¸»æ¸¸æˆä¸­è¿›è¡Œ</div>
                `;
            } catch (error) {
                testDiv.innerHTML = `<div class="error">å¯¼èˆªæµ‹è¯•å¤±è´¥ï¼š${error.message}</div>`;
            }
        }

        // é¡µé¢åŠ è½½å®Œæˆåè‡ªåŠ¨è¿è¡ŒåŸºç¡€æ£€æŸ¥
        window.addEventListener('load', () => {
            console.log('åŠŸèƒ½æµ‹è¯•é¡µé¢åŠ è½½å®Œæˆ');

            // æ£€æŸ¥å¿…è¦çš„å…¨å±€å¯¹è±¡
            const requiredGlobals = [
                'game', 'tutorialManager', 'storageManager', 'scenarios'
            ];

            const missingGlobals = requiredGlobals.filter(name => !window[name]);

            if (missingGlobals.length > 0) {
                console.warn('ç¼ºå°‘å…¨å±€å¯¹è±¡:', missingGlobals);
            } else {
                console.log('æ‰€æœ‰å¿…è¦çš„å…¨å±€å¯¹è±¡å·²è®¾ç½®');
            }
        });

        // æ·»åŠ åŠ¨ç”»æ ·å¼
        const style = document.createElement('style');
        style.textContent = `
            @keyframes bounce {
                0%, 100% { transform: translate(-50%, -50%) scale(1); }
                50% { transform: translate(-50%, -50%) scale(1.1); }
            }
            @keyframes fadeOut {
                from { opacity: 1; }
                to { opacity: 0; }
            }
        `;
        document.head.appendChild(style);
    </script>
</body>
</html>