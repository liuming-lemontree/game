<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>è®¾å¤‡å…¼å®¹æ€§æµ‹è¯• - åè¯ˆå…ˆé”‹</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            min-height: 100vh;
        }
        .test-container {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 20px;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        .device-info {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }
        .info-item {
            background: rgba(255, 255, 255, 0.1);
            padding: 15px;
            border-radius: 8px;
            text-align: center;
        }
        .info-label {
            font-size: 12px;
            opacity: 0.8;
            margin-bottom: 5px;
        }
        .info-value {
            font-size: 18px;
            font-weight: bold;
        }
        .test-buttons {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }
        .test-btn {
            background: rgba(255, 255, 255, 0.2);
            color: white;
            border: 1px solid rgba(255, 255, 255, 0.3);
            padding: 15px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
        }
        .test-btn:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-2px);
        }
        .test-btn:active {
            transform: translateY(0);
        }
        .test-btn.disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        .interaction-area {
            background: rgba(255, 255, 255, 0.1);
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
            min-height: 200px;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-wrap: wrap;
            gap: 10px;
        }
        .interaction-btn {
            background: rgba(255, 255, 255, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.3);
            color: white;
            padding: 12px 20px;
            border-radius: 6px;
            cursor: pointer;
            min-width: 120px;
            text-align: center;
            transition: all 0.2s ease;
        }
        .interaction-btn:hover {
            background: rgba(255, 255, 255, 0.3);
        }
        .interaction-btn:active {
            transform: scale(0.98);
        }
        .feedback-log {
            background: rgba(0, 0, 0, 0.3);
            padding: 15px;
            border-radius: 8px;
            font-family: monospace;
            font-size: 12px;
            max-height: 300px;
            overflow-y: auto;
            white-space: pre-wrap;
        }
        .status-indicator {
            display: inline-block;
            width: 10px;
            height: 10px;
            border-radius: 50%;
            margin-right: 8px;
        }
        .status-success { background: #28a745; }
        .status-warning { background: #ffc107; }
        .status-error { background: #dc3545; }
        .status-info { background: #17a2b8; }
        .quick-links {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            justify-content: center;
            margin-bottom: 20px;
        }
        .quick-link {
            background: rgba(255, 255, 255, 0.2);
            color: white;
            text-decoration: none;
            padding: 10px 20px;
            border-radius: 6px;
            transition: all 0.3s ease;
        }
        .quick-link:hover {
            background: rgba(255, 255, 255, 0.3);
        }
    </style>
</head>
<body>
    <h1 style="text-align: center; margin-bottom: 30px;">ğŸ“± è®¾å¤‡å…¼å®¹æ€§æµ‹è¯•</h1>

    <div class="quick-links">
        <a href="./index.html" class="quick-link" target="_blank">ğŸ® æ¸¸æˆä¸»é¡µ</a>
        <a href="./test.html" class="quick-link" target="_blank">ğŸ§ª åŸºç¡€æµ‹è¯•</a>
        <a href="./å®Œæ•´æµ‹è¯•.html" class="quick-link" target="_blank">ğŸ“Š å®Œæ•´æµ‹è¯•</a>
    </div>

    <div class="test-container">
        <h2>ğŸ“Š è®¾å¤‡ä¿¡æ¯</h2>
        <div class="device-info" id="device-info">
            <div class="info-item">
                <div class="info-label">è®¾å¤‡ç±»å‹</div>
                <div class="info-value" id="device-type">æ£€æµ‹ä¸­...</div>
            </div>
            <div class="info-item">
                <div class="info-label">è§¦æ‘¸æ”¯æŒ</div>
                <div class="info-value" id="touch-support">æ£€æµ‹ä¸­...</div>
            </div>
            <div class="info-item">
                <div class="info-label">é¼ æ ‡æ”¯æŒ</div>
                <div class="info-value" id="mouse-support">æ£€æµ‹ä¸­...</div>
            </div>
            <div class="info-item">
                <div class="info-label">å±å¹•æ–¹å‘</div>
                <div class="info-value" id="orientation">æ£€æµ‹ä¸­...</div>
            </div>
            <div class="info-item">
                <div class="info-label">å±å¹•å°ºå¯¸</div>
                <div class="info-value" id="screen-size">æ£€æµ‹ä¸­...</div>
            </div>
            <div class="info-item">
                <div class="info-label">åƒç´ æ¯”</div>
                <div class="info-value" id="pixel-ratio">æ£€æµ‹ä¸­...</div>
            </div>
        </div>
    </div>

    <div class="test-container">
        <h2>ğŸ§ª äº¤äº’æµ‹è¯•</h2>
        <div class="test-buttons">
            <button class="test-btn" onclick="testButtonClicks()">
                ğŸ–±ï¸ æµ‹è¯•æŒ‰é’®ç‚¹å‡»
            </button>
            <button class="test-btn" onclick="testTouchSimulation()">
                ğŸ‘† æµ‹è¯•è§¦æ‘¸æ¨¡æ‹Ÿ
            </button>
            <button class="test-btn" onclick="testHoverEffects()">
                âœ¨ æµ‹è¯•æ‚¬åœæ•ˆæœ
            </button>
            <button class="test-btn" onclick="testResponsiveLayout()">
                ğŸ“ æµ‹è¯•å“åº”å¼å¸ƒå±€
            </button>
        </div>

        <div class="interaction-area" id="interaction-area">
            <button class="interaction-btn" onclick="logInteraction('æŒ‰é’®1ç‚¹å‡»')">æŒ‰é’® 1</button>
            <button class="interaction-btn" onclick="logInteraction('æŒ‰é’®2ç‚¹å‡»')">æŒ‰é’® 2</button>
            <button class="interaction-btn" onclick="logInteraction('æŒ‰é’®3ç‚¹å‡»')">æŒ‰é’® 3</button>
            <button class="interaction-btn" onclick="logInteraction('æŒ‰é’®4ç‚¹å‡»')">æŒ‰é’® 4</button>
        </div>
    </div>

    <div class="test-container">
        <h2>ğŸ“ æµ‹è¯•åé¦ˆæ—¥å¿—</h2>
        <div class="feedback-log" id="feedback-log">
            ç­‰å¾…æµ‹è¯•å¼€å§‹...
        </div>
    </div>

    <!-- åŠ è½½å¿…è¦çš„è„šæœ¬ -->
    <script src="js/device-adaptation.js"></script>

    <script>
        let interactionCount = 0;
        let testStartTime = Date.now();

        function log(message, type = 'info') {
            const timestamp = new Date().toLocaleTimeString();
            const logEntry = `[${timestamp}] ${message}`;
            const logElement = document.getElementById('feedback-log');

            const statusClass = type === 'success' ? 'status-success' :
                               type === 'warning' ? 'status-warning' :
                               type === 'error' ? 'status-error' : 'status-info';

            logElement.innerHTML += `<div><span class="status-indicator ${statusClass}"></span>${logEntry}</div>`;
            logElement.scrollTop = logElement.scrollHeight;
        }

        function updateDeviceInfo() {
            if (typeof deviceAdapter !== 'undefined') {
                const info = deviceAdapter.getDeviceInfo();

                document.getElementById('device-type').textContent = info.type;
                document.getElementById('touch-support').textContent = info.touchSupported ? 'âœ… æ”¯æŒ' : 'âŒ ä¸æ”¯æŒ';
                document.getElementById('mouse-support').textContent = info.mouseSupported ? 'âœ… æ”¯æŒ' : 'âŒ ä¸æ”¯æŒ';
                document.getElementById('orientation').textContent = info.orientation;
                document.getElementById('screen-size').textContent = `${info.windowWidth}Ã—${info.windowHeight}`;
                document.getElementById('pixel-ratio').textContent = info.pixelRatio;

                log(`è®¾å¤‡æ£€æµ‹å®Œæˆ: ${info.type}è®¾å¤‡ï¼Œè§¦æ‘¸${info.touchSupported ? 'æ”¯æŒ' : 'ä¸æ”¯æŒ'}`, 'success');
            } else {
                log('è®¾å¤‡é€‚é…ç®¡ç†å™¨æœªåŠ è½½', 'error');
            }
        }

        function logInteraction(action) {
            interactionCount++;
            const deviceType = deviceAdapter ? deviceAdapter.deviceType : 'æœªçŸ¥';
            const method = 'ontouchstart' in window ? 'è§¦æ‘¸' : 'é¼ æ ‡';
            log(`${action} (è®¾å¤‡: ${deviceType}, æ–¹å¼: ${method}, æ€»è®¡: ${interactionCount}æ¬¡)`, 'info');
        }

        function testButtonClicks() {
            log('ğŸ§ª å¼€å§‹æŒ‰é’®ç‚¹å‡»æµ‹è¯•...', 'info');

            const buttons = document.querySelectorAll('.interaction-btn');
            buttons.forEach((btn, index) => {
                setTimeout(() => {
                    btn.click();
                    log(`âœ… æŒ‰é’®${index + 1}ç‚¹å‡»æˆåŠŸ`, 'success');
                }, (index + 1) * 500);
            });
        }

        function testTouchSimulation() {
            log('ğŸ‘† å¼€å§‹è§¦æ‘¸æ¨¡æ‹Ÿæµ‹è¯•...', 'info');

            if (!('ontouchstart' in window) && deviceAdapter && deviceAdapter.mouseSupported) {
                log('âœ… æ£€æµ‹åˆ°æ¡Œé¢æµè§ˆå™¨ï¼Œè§¦æ‘¸æ¨¡æ‹Ÿå·²å¯ç”¨', 'success');

                // æµ‹è¯•è§¦æ‘¸åé¦ˆæ•ˆæœ
                const testArea = document.getElementById('interaction-area');
                testArea.addEventListener('click', function(e) {
                    if (e.target.classList.contains('interaction-btn')) {
                        log(`ğŸ¯ è§¦æ‘¸æ¨¡æ‹Ÿ: ${e.target.textContent} (åæ ‡: ${e.pageX}, ${e.pageY})`, 'info');
                    }
                });

                log('ğŸ“ è¯·ç‚¹å‡»ä¸Šæ–¹çš„æŒ‰é’®æµ‹è¯•è§¦æ‘¸æ¨¡æ‹Ÿæ•ˆæœ', 'info');
            } else if ('ontouchstart' in window) {
                log('âœ… æ£€æµ‹åˆ°åŸç”Ÿè§¦æ‘¸æ”¯æŒ', 'success');
                log('ğŸ“ è¯·ç›´æ¥è§¦æ‘¸æŒ‰é’®æµ‹è¯•åŸç”Ÿè§¦æ‘¸æ•ˆæœ', 'info');
            } else {
                log('âŒ æœªæ£€æµ‹åˆ°è§¦æ‘¸æˆ–é¼ æ ‡æ”¯æŒ', 'error');
            }
        }

        function testHoverEffects() {
            log('âœ¨ å¼€å§‹æ‚¬åœæ•ˆæœæµ‹è¯•...', 'info');

            if (deviceAdapter && deviceAdapter.isDesktop()) {
                log('âœ… æ¡Œé¢è®¾å¤‡ï¼Œæ‚¬åœæ•ˆæœå·²å¯ç”¨', 'success');

                const buttons = document.querySelectorAll('.interaction-btn');
                buttons.forEach(btn => {
                    btn.addEventListener('mouseenter', () => {
                        log(`ğŸ¯ æ‚¬åœ: ${btn.textContent}`, 'info');
                    });
                });

                log('ğŸ“ è¯·å°†é¼ æ ‡æ‚¬åœåœ¨æŒ‰é’®ä¸Šæµ‹è¯•æ•ˆæœ', 'info');
            } else {
                log('â„¹ï¸ ç§»åŠ¨è®¾å¤‡ï¼Œæ‚¬åœæ•ˆæœæœ‰é™åˆ¶', 'warning');
                log('ğŸ’¡ ç§»åŠ¨è®¾å¤‡ä½¿ç”¨è§¦æ‘¸åé¦ˆä»£æ›¿æ‚¬åœæ•ˆæœ', 'info');
            }
        }

        function testResponsiveLayout() {
            log('ğŸ“ å¼€å§‹å“åº”å¼å¸ƒå±€æµ‹è¯•...', 'info');

            const width = window.innerWidth;
            const height = window.innerHeight;
            const orientation = width > height ? 'æ¨ªå±' : 'ç«–å±';

            log(`ğŸ“ å½“å‰å±å¹•: ${width}Ã—${height} (${orientation})`, 'info');

            // æ ¹æ®å±å¹•å°ºå¯¸ç»™å‡ºå»ºè®®
            if (width < 480) {
                log('ğŸ“± å°å±æ‰‹æœºæ¨¡å¼ - å¸ƒå±€å·²ä¼˜åŒ–', 'success');
            } else if (width < 768) {
                log('ğŸ“± å¤§å±æ‰‹æœºæ¨¡å¼ - å¸ƒå±€å·²ä¼˜åŒ–', 'success');
            } else if (width < 1024) {
                log('ğŸ“± å¹³æ¿æ¨¡å¼ - å¸ƒå±€å·²ä¼˜åŒ–', 'success');
            } else {
                log('ğŸ–¥ï¸ æ¡Œé¢æ¨¡å¼ - å¸ƒå±€å·²ä¼˜åŒ–', 'success');
            }

            log('ğŸ’¡ å°è¯•è°ƒæ•´æµè§ˆå™¨çª—å£å¤§å°æˆ–æ—‹è½¬å±å¹•æµ‹è¯•å“åº”å¼æ•ˆæœ', 'info');
        }

        // ç›‘å¬å±å¹•æ–¹å‘å˜åŒ–
        window.addEventListener('orientationchange', () => {
            const orientation = window.innerWidth > window.innerHeight ? 'æ¨ªå±' : 'ç«–å±';
            log(`ğŸ”„ å±å¹•æ–¹å‘å˜åŒ–: ${orientation}`, 'info');
            updateDeviceInfo();
        });

        window.addEventListener('resize', () => {
            log(`ğŸ“ çª—å£å¤§å°å˜åŒ–: ${window.innerWidth}Ã—${window.innerHeight}`, 'info');
            updateDeviceInfo();
        });

        // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–
        window.addEventListener('load', () => {
            log('ğŸ¯ è®¾å¤‡å…¼å®¹æ€§æµ‹è¯•é¡µé¢åŠ è½½å®Œæˆ', 'success');

            setTimeout(() => {
                updateDeviceInfo();
                testResponsiveLayout();

                log('ğŸš€ æµ‹è¯•å‡†å¤‡å®Œæˆï¼Œè¯·é€‰æ‹©ä¸Šæ–¹çš„æµ‹è¯•é¡¹ç›®', 'info');
                log('ğŸ’¡ å»ºè®®æŒ‰é¡ºåºè¿›è¡Œ: æŒ‰é’®ç‚¹å‡» â†’ è§¦æ‘¸æ¨¡æ‹Ÿ â†’ æ‚¬åœæ•ˆæœ â†’ å“åº”å¼å¸ƒå±€', 'info');
            }, 1000);
        });

        // ç­‰å¾…è®¾å¤‡é€‚é…å™¨åŠ è½½
        setTimeout(() => {
            if (typeof deviceAdapter === 'undefined') {
                log('âš ï¸ è®¾å¤‡é€‚é…å™¨æœªåŠ è½½ï¼Œè¯·æ£€æŸ¥ç½‘ç»œè¿æ¥', 'warning');
            }
        }, 3000);
    </script>
</body>
</html>